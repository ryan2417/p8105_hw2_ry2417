p8105\_hw2\_ry2417
================
Ruiqi Yan
9/30/2021

Load all packages needed

``` r
library(tidyverse)
library(readxl)
```

## Problem 1

import and clean data in `Mr.Trash Wheel` sheet from
`Trash-Wheel-Collection-Totals-8-6-19.xlsx`

``` r
trashwheel_df <- 
  read_excel(
    "data/Trash-Wheel-Collection-Totals-8-6-19.xlsx", 
    range = "A2:N406") %>% 
  janitor::clean_names() %>% 
  filter(!is.na(dumpster)) %>% 
  mutate(sports_balls = round(sports_balls))
```

import and clean data in `2018 Precipitation` and `2019 Precipitation`
from `Trash-Wheel-Collection-Totals-8-6-19.xlsx`

``` r
precipitation_2018_df <-
  read_excel(
    "data/Trash-Wheel-Collection-Totals-8-6-19.xlsx",
    sheet = "2018 Precipitation",
    range = "A2:B14"
  ) %>% 
  janitor::clean_names() %>% 
  rename(precipitation_inch = total) %>% 
  filter(!is.na(precipitation_inch)) %>% 
  mutate(year = "2018")

precipitation_2019_df <-
  read_excel(
    "data/Trash-Wheel-Collection-Totals-8-6-19.xlsx",
    sheet = "2019 Precipitation",
    range = "A2:B14"
  ) %>% 
  janitor::clean_names() %>% 
  rename(precipitation_inch = total) %>% 
  filter(!is.na(precipitation_inch)) %>% 
  mutate(year = "2019")
```

combine two precipitation data frames and convert month to a character
variable

``` r
precipitation_all_df <-
  bind_rows(precipitation_2018_df, precipitation_2019_df) %>% 
  mutate(month = month.name[month]) %>% 
  relocate(year)
```

describe these two data sets

``` r
some_example_trashwheel <- 
  trashwheel_df %>% 
  select(dumpster, date, weight_tons, volume_cubic_yards) %>% 
  head()

year_summary <- 
  trashwheel_df %>% 
  group_by(year) %>% 
  summarise(
    total_weight_tons = sum(weight_tons), 
    average_weight_tons = mean(weight_tons), 
    total_volume_cubic_yards = sum(volume_cubic_yards),
    average_volume_cubic_yards = mean(volume_cubic_yards)
  )

median_sport_balls_2017 <- 
  trashwheel_df %>% 
  filter(year == 2017) %>% 
  pull(sports_balls) %>% 
  median()

some_example_precipitation <- 
  precipitation_all_df %>% 
  head()

max_precipitation <- 
  precipitation_all_df %>% 
  filter(precipitation_inch == max(precipitation_inch)) %>% 
  select(month, year) %>% 
  unlist()

min_precipitation <- 
  precipitation_all_df %>% 
  filter(precipitation_inch == min(precipitation_inch)) %>% 
  select(month, year) %>% 
  unlist()

sum_precipitation_2018 <- 
  precipitation_all_df %>% 
  filter(year == "2018") %>% 
  pull(precipitation_inch) %>% 
  sum()

sum_precipitation_2019 <- 
  precipitation_all_df %>% 
  filter(year == "2019") %>% 
  pull(precipitation_inch) %>% 
  sum()
```

There are 344 observations and 14 variables in `Mr.Trash Wheel`. The
variables include:
`dumpster, month, year, date, weight_tons, volume_cubic_yards, plastic_bottles, polystyrene, cigarette_butts, glass_bottles, grocery_bags, chip_bags, sports_balls, homes_powered`.
Some examples of key variables as

| dumpster | date       | weight\_tons | volume\_cubic\_yards |
|---------:|:-----------|-------------:|---------------------:|
|        1 | 2014-05-16 |         4.31 |                   18 |
|        2 | 2014-05-16 |         2.74 |                   13 |
|        3 | 2014-05-16 |         3.45 |                   15 |
|        4 | 2014-05-17 |         3.10 |                   15 |
|        5 | 2014-05-17 |         4.06 |                   18 |
|        6 | 2014-05-20 |         2.71 |                   13 |

. The year of the data is ranging from 2014 to 2019. The total number of
cigarette butts are 1.057942 × 10<sup>7</sup>; the total of glass
bottles are 8724; the total of plastic bottles are
6.44365 × 10<sup>5</sup>. The total and average weight and volume of
each year are

| year | total\_weight\_tons | average\_weight\_tons | total\_volume\_cubic\_yards | average\_volume\_cubic\_yards |
|-----:|--------------------:|----------------------:|----------------------------:|------------------------------:|
| 2014 |              141.35 |              3.212500 |                         669 |                      15.20455 |
| 2015 |              238.80 |              3.363380 |                        1103 |                      15.53521 |
| 2016 |              164.59 |              3.227255 |                         816 |                      16.00000 |
| 2017 |              174.84 |              3.178909 |                         885 |                      16.09091 |
| 2018 |              310.39 |              3.337527 |                        1425 |                      15.32258 |
| 2019 |               92.48 |              3.082667 |                         449 |                      14.96667 |

. The median number of sports balls in a dumpster in 2017 is 8. 2018 has
most trash and 2019 has least trash.  
There are 18 observations and 3 variables in the combination of
`2018 precipitation` and `2019 precipitation`. The variables include:
`year, month, precipitation_inch`.Some examples of key variables as

| year | month    | precipitation\_inch |
|:-----|:---------|--------------------:|
| 2018 | January  |                0.94 |
| 2018 | February |                4.80 |
| 2018 | March    |                2.69 |
| 2018 | April    |                4.69 |
| 2018 | May      |                9.27 |
| 2018 | June     |                4.77 |

The month with most precipitation is September, 2018 and the month with
least precipitation is June, 2019. The total precipitation in 2018 is
70.33 inches. The total precipitation in 2019 is 16.67 inches.

## Problem 2

import and clean data in `pols-month.csv`

``` r
pols_df <- 
  read_csv("data/pols-month.csv") %>% 
  janitor::clean_names() %>% 
  separate(
    mon, 
    into = c("year", "month", "day"), 
    sep = "-", 
    convert = TRUE
  ) %>% 
  mutate(
    month = month.name[month],
    president = ifelse(prez_dem == 1, "dem", "gop")
  ) %>% 
  select(-prez_dem, -prez_gop, -day)
```

import and clean data in `snp.csv`

``` r
snp_df <- 
  read_csv("data/snp.csv") %>% 
  janitor::clean_names() %>% 
  separate(
    date, 
    into = c("month", "day", "year"), 
    sep = "/", 
    convert = TRUE
  ) %>% 
  mutate(
    year = ifelse(year <= 15, year + 2000, year + 1900),
    month = month.name[month],
  ) %>% 
  select(-day) %>% 
  relocate(year, month) %>% 
  arrange(year, month)
```
